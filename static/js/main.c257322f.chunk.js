(this["webpackJsonpbug-sniper"]=this["webpackJsonpbug-sniper"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(2),i=c.n(n),s=c(8),r=c.n(s),o=(c(14),c(5)),u=c(3),h=c(1),d=(c(15),50),b={normal:{speed:1,rotation:.5},excited:{speed:2,rotation:2}};function l(e,t){switch(t.type){case"timeStep":if(!e.active)return e;var c=e.excited?b.excited:b.normal,a=e.x+c.speed*Math.cos(e.direction),n=e.y+c.speed*Math.sin(e.direction),i=e.direction+c.rotation*(Math.random()-.5);i%=2*Math.PI;var s=t.windowSize.width-d,r=t.windowSize.height-d;return a<0?(a=0,n<0?(n=0,i=i>5*Math.PI/4?0:Math.PI/2):n>r?(n=r,i=i>3*Math.PI/4?3*Math.PI/2:0):i=i>Math.PI?3*Math.PI/2:Math.PI/2):a>s?(a=s,n<0?(n=0,i=i>7*Math.PI/4?Math.PI/2:Math.PI):n>r?(n=r,i=i>Math.PI/4?Math.PI:3*Math.PI/2):i=i>Math.PI?3*Math.PI/2:Math.PI/2):n<0?(n=0,i=i>3*Math.PI/2?0:Math.PI):n>r&&(n=r,i=i>Math.PI/2?Math.PI:0),Object(h.a)(Object(h.a)({},e),{},{x:a,y:n,direction:i});case"scare":return!e.active||e.excited?e:(setTimeout((function(){return t.dispatch({type:"calm"})}),5e3),Object(h.a)(Object(h.a)({},e),{},{excited:!0}));case"calm":return Object(h.a)(Object(h.a)({},e),{},{excited:!1});case"squash":return e.active?Object(h.a)(Object(h.a)({},e),{},{active:!1,downtime:e.downtime+1}):e;default:return e}}var j=function(e){var t,c=Object(n.useReducer)(l,(t=e.windowSize,{active:!0,excited:!1,x:Math.random()*t.width,y:Math.random()*t.height,direction:2*Math.random()*Math.PI,downtime:1})),i=Object(o.a)(c,2),s=i[0],r=i[1],u=Object(n.useCallback)((function(){r({type:"timeStep",windowSize:e.windowSize})}),[e.windowSize]);Object(n.useEffect)((function(){var e=setInterval(u,20);return function(){return clearInterval(e)}}),[u]);var h=e.id,b=e.appDispatch;return Object(n.useEffect)((function(){if(!s.active){b({type:"squashed",key:h});var e=setTimeout((function(){b({type:"remove",key:h})}),3e4);return function(){return clearTimeout(e)}}}),[s.active,h,b]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"Bug",style:{left:s.x,top:s.y,height:d,width:d,backgroundImage:"url(".concat("/bug-sniper","/").concat(s.active?"bug.png":"squashed-bug.png",")"),opacity:s.active?1:0,transition:"20ms, opacity ".concat(30,"s")},onClick:function(){e.clickable&&r({type:"squash",dispatch:r})}}),Object(a.jsx)("div",{className:"bugAwareZone",style:{left:s.x-50,top:s.y-50,height:150,width:150},onClick:function(){e.clickable&&r({type:"scare",dispatch:r})}})]})};c(16);var f=function(e){return Object(a.jsx)("div",{className:"reload-message",style:{opacity:e.display?1:0},children:"PRESS [SPACE] TO RELOAD"})};c(17);function v(){return{width:window.innerWidth,height:window.innerHeight}}function g(e,t){var c=e;switch(t.type){case"squashed":var a=e.activeBugs.filter((function(e){return e!==t.key}));a.length<e.activeBugs.length&&(c=Object(h.a)(Object(h.a)({},e),{},{activeBugs:[].concat(Object(u.a)(a),[Date.now()]),inactiveBugs:[].concat(Object(u.a)(e.inactiveBugs),[t.key]),score:e.score+1})),c.score>c.highScore&&(c.highScore=c.score,localStorage.setItem("highScore",JSON.stringify(c.highScore)));break;case"remove":c=Object(h.a)(Object(h.a)({},e),{},{inactiveBugs:e.inactiveBugs.filter((function(e){return e!==t.key}))});break;case"new":c=Object(h.a)(Object(h.a)({},e),{},{activeBugs:[].concat(Object(u.a)(e.activeBugs),[Date.now()])});break;case"fire":c=e.shotsLeft>0?Object(h.a)(Object(h.a)({},e),{},{shotsLeft:e.shotsLeft-1}):Object(h.a)(Object(h.a)({},e),{},{showReloadMessage:!0});break;case"reload":e.shotsLeft<6&&(c=Object(h.a)(Object(h.a)({},e),{},{shotsLeft:e.shotsLeft+1,showReloadMessage:!1}))}return c}var p=function(){var e=Object(n.useState)(v()),t=Object(o.a)(e,2),c=t[0],i=t[1],s=Object(n.useReducer)(g,{activeBugs:[Date.now()],inactiveBugs:[],score:0,highScore:parseInt(localStorage.getItem("highScore"))||0,shotsLeft:6,showReloadMessage:!1}),r=Object(o.a)(s,2),h=r[0],d=r[1];return Object(n.useEffect)((function(){var e=function(){return i(v())};window.addEventListener("resize",e);var t=setInterval((function(){return d({type:"new"})}),25e3);return function(){window.removeEventListener("resize",e),clearInterval(t)}}),[]),Object(a.jsxs)("div",{className:"App",onClick:function(){return d({type:"fire"})},onKeyUp:function(e){" "===e.key&&d({type:"reload"})},tabIndex:0,style:{cursor:"url(".concat("/bug-sniper","/scope.png) 62 67, auto"),outline:"none"},children:[Object(a.jsxs)("div",{className:"scores",children:[Object(a.jsxs)("div",{children:["CURRENT SCORE: ",h.score]}),Object(a.jsxs)("div",{children:["HIGH SCORE: ",h.highScore]}),Object(a.jsx)("div",{children:function(e){for(var t=[],c=0;c<e;c++)t.push(Object(a.jsx)("div",{className:"bullet"},c));return t}(h.shotsLeft)})]}),Object(a.jsx)(f,{display:h.showReloadMessage}),[].concat(Object(u.a)(h.inactiveBugs.map((function(e){return Object(a.jsx)(j,{id:e,windowSize:c,appDispatch:d},e)}))),Object(u.a)(h.activeBugs.map((function(e){return Object(a.jsx)(j,{id:e,windowSize:c,appDispatch:d,clickable:h.shotsLeft>0},e)})).reverse()))]})},O=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,19)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))};r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root")),O()}],[[18,1,2]]]);
//# sourceMappingURL=main.c257322f.chunk.js.map