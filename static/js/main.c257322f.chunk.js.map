{"version":3,"sources":["components/Bug/index.js","components/ReloadMessage/index.js","App.js","reportWebVitals.js","index.js"],"names":["SIZE","BEHAVIOR","normal","speed","rotation","excited","reducer","state","action","type","active","behavior","newX","x","Math","cos","direction","newY","y","sin","newDirection","random","PI","maxX","windowSize","width","maxY","height","setTimeout","dispatch","EXCITE_TIME","downtime","Bug","props","useReducer","handleTimeStep","useCallback","useEffect","timeStepInterval","setInterval","clearInterval","id","appDispatch","key","fadeTimeout","FADE_TIME","clearTimeout","className","style","left","top","backgroundImage","process","opacity","transition","onClick","clickable","AWARENESS_RADIUS","ReloadMessage","display","getWindowSize","window","innerWidth","innerHeight","newState","newActiveBugs","activeBugs","filter","bugKey","length","Date","now","inactiveBugs","score","highScore","localStorage","setItem","JSON","stringify","shotsLeft","showReloadMessage","App","useState","setWindowSize","parseInt","getItem","handleResize","addEventListener","bugGenerationInterval","removeEventListener","onKeyUp","event","tabIndex","cursor","outline","numBullets","bullets","i","push","renderBullets","map","reverse","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c257322f.chunk.js","sourcesContent":["import { useEffect, useReducer, useCallback } from 'react';\nimport './style.css';\n\nconst TIMESTEP = 20; // ms\nconst SIZE = 50; // px\nconst AWARENESS_RADIUS = 50; // px\nconst BEHAVIOR = {\n  normal: {\n    speed: 1, // px per TIMESTEP\n    rotation: 0.5,\n  },\n  excited: {\n    speed: 2, // range of possible rotations in radians per TIMESTEP\n    rotation: 2,\n  },\n};\nconst FADE_TIME = 30; // seconds\nconst EXCITE_TIME = 5; // seconds\n\nfunction generateInitialState(windowSize) {\n  return {\n    active: true,\n    excited: false,\n    x: Math.random() * windowSize.width,\n    y: Math.random() * windowSize.height,\n    direction: Math.random() * 2 * Math.PI,\n    downtime: 1,\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"timeStep\":\n      if (!state.active) {\n        return state;\n      }\n\n      const behavior = state.excited ? BEHAVIOR.excited : BEHAVIOR.normal;\n\n      let newX = state.x + behavior.speed * Math.cos(state.direction);\n      let newY = state.y + behavior.speed * Math.sin(state.direction);\n      let newDirection = state.direction + behavior.rotation * (Math.random() - 0.5);\n      newDirection %= 2 * Math.PI;\n      const maxX = action.windowSize.width - SIZE;\n      const maxY = action.windowSize.height - SIZE;\n\n      if (newX < 0) {\n        newX = 0;\n        if (newY < 0) {\n          // top left corner\n          newY = 0;\n          newDirection = newDirection > 5 * Math.PI / 4 ? 0 : Math.PI / 2;\n        } else if (newY > maxY) {\n          // bottom left corner\n          newY = maxY;\n          newDirection = newDirection > 3 * Math.PI / 4 ? 3 * Math.PI / 2 : 0;\n        } else {\n          // left edge\n          newDirection = newDirection > Math.PI ? 3 * Math.PI / 2 : Math.PI / 2;\n        }\n      } else if (newX > maxX) {\n        newX = maxX;\n        if (newY < 0) {\n          // top right corner\n          newY = 0;\n          newDirection = newDirection > 7 * Math.PI / 4 ? Math.PI / 2 : Math.PI;\n        } else if (newY > maxY) {\n          // bottom right corner\n          newY = maxY;\n          newDirection = newDirection > Math.PI / 4 ? Math.PI : 3 * Math.PI / 2;\n        } else {\n          // right edge\n          newDirection = newDirection > Math.PI ? 3 * Math.PI / 2 : Math.PI / 2;\n        }\n      } else {\n        if (newY < 0) {\n          // top edge\n          newY = 0;\n          newDirection = newDirection > 3 * Math.PI / 2 ? 0 : Math.PI;\n        } else if (newY > maxY) {\n          // bottom edge\n          newY = maxY;\n          newDirection = newDirection > Math.PI / 2 ? Math.PI : 0;\n        }\n      }\n\n      return { ...state, x: newX, y: newY, direction: newDirection };\n\n    case \"scare\":\n      if (!state.active || state.excited) {\n        return state;\n      }\n\n      setTimeout(\n        () => action.dispatch({ type: \"calm\" }),\n        EXCITE_TIME * 1000\n      );\n\n      return { ...state, excited: true };\n\n    case \"calm\":\n      return { ...state, excited: false };\n    case \"squash\":\n      if (!state.active) {\n        return state;\n      }\n\n      return { ...state, active: false, downtime: state.downtime + 1 };\n    default:\n      return state;\n  }\n}\n\nfunction Bug(props) {\n  const [state, dispatch] = useReducer(reducer, generateInitialState(props.windowSize));\n\n  const handleTimeStep = useCallback(\n    () => {\n      dispatch({ type: \"timeStep\", windowSize: props.windowSize });\n    },\n    [props.windowSize]\n  );\n\n  useEffect(\n    () => {\n      const timeStepInterval = setInterval(handleTimeStep, TIMESTEP);\n      return () => clearInterval(timeStepInterval);\n    },\n    [handleTimeStep]\n  );\n\n  const { id, appDispatch } = props;\n\n  useEffect(\n    () => {\n\n      if (!state.active) {\n        appDispatch({ type: \"squashed\", key: id });\n\n        const fadeTimeout = setTimeout(\n          () => {\n            appDispatch({ type: \"remove\", key: id });\n          },\n          FADE_TIME * 1000\n        );\n        return () => clearTimeout(fadeTimeout);\n      }\n    },\n    [state.active, id, appDispatch]\n  );\n\n  function handleSquash() {\n    if (props.clickable) {\n      dispatch({ type: \"squash\", dispatch: dispatch });\n    }\n  }\n\n  function handleScare() {\n    if (props.clickable) {\n      dispatch({ type: \"scare\", dispatch: dispatch });\n    }\n  }\n\n  return (\n    <>\n      <div\n        className=\"Bug\"\n        style={{\n          left: state.x,\n          top: state.y,\n          height: SIZE,\n          width: SIZE,\n          backgroundImage: `url(${process.env.PUBLIC_URL}/${state.active ? \"bug.png\" : \"squashed-bug.png\"})`,\n          opacity: state.active ? 1 : 0,\n          transition: `20ms, opacity ${FADE_TIME}s`\n        }}\n        onClick={handleSquash}\n      ></div>\n      <div\n        className=\"bugAwareZone\"\n        style={{\n          left: state.x - AWARENESS_RADIUS,\n          top: state.y - AWARENESS_RADIUS,\n          height: AWARENESS_RADIUS * 2 + SIZE,\n          width: AWARENESS_RADIUS * 2 + SIZE,\n        }}\n        onClick={handleScare}\n      ></div>\n    </>\n    \n  );\n}\n\nexport default Bug;\n","import './style.css';\n\nfunction ReloadMessage(props) {\n\n  return (\n    <div className=\"reload-message\" style={{ opacity: props.display ? 1 : 0 }}>PRESS [SPACE] TO RELOAD</div>\n  );\n}\n\nexport default ReloadMessage;\n","import { useState, useEffect, useReducer } from 'react';\nimport Bug from './components/Bug';\nimport ReloadMessage from './components/ReloadMessage';\nimport './App.css';\n\nconst MAX_BULLETS = 6;\n\nfunction getWindowSize() {\n  return { width: window.innerWidth, height: window.innerHeight };\n}\n\nfunction reducer(state, action) {\n  let newState = state;\n\n  switch (action.type) {\n    case \"squashed\":\n      const newActiveBugs = state.activeBugs.filter(bugKey => bugKey !== action.key);\n\n      if (newActiveBugs.length < state.activeBugs.length) {\n        newState = {\n          ...state,\n          activeBugs: [...newActiveBugs, Date.now()],\n          inactiveBugs: [...state.inactiveBugs, action.key],\n          score: state.score + 1\n        };\n      }\n\n      if (newState.score > newState.highScore) {\n        newState.highScore = newState.score;\n        localStorage.setItem(\"highScore\", JSON.stringify(newState.highScore));\n      }\n\n      break;\n\n    case \"remove\":\n      newState = { ...state, inactiveBugs: state.inactiveBugs.filter(bugKey => bugKey !== action.key) };\n      break;\n\n    case \"new\": \n      newState = {\n        ...state,\n        activeBugs: [...state.activeBugs, Date.now()],\n      };\n      break;\n\n    case \"fire\": \n      if (state.shotsLeft > 0) {\n        newState = {\n          ...state,\n          shotsLeft: state.shotsLeft - 1,\n        };\n      } else {\n        newState = {\n          ...state,\n          showReloadMessage: true,\n        }\n      }\n      break;\n\n    case \"reload\":\n      if (state.shotsLeft < MAX_BULLETS)\n      newState = {\n        ...state,\n        shotsLeft: state.shotsLeft + 1,\n        showReloadMessage: false,\n      };\n      break;\n\n    default:\n  }\n\n  return newState;\n}\n\nfunction App() {\n  const [windowSize, setWindowSize] = useState(getWindowSize());\n\n  const [state, dispatch] = useReducer(reducer, {\n    activeBugs: [Date.now()],\n    inactiveBugs: [],\n    score: 0,\n    highScore: parseInt(localStorage.getItem(\"highScore\")) || 0,\n    shotsLeft: MAX_BULLETS,\n    showReloadMessage: false,\n  });\n\n  useEffect(() => {\n    const handleResize = () => setWindowSize(getWindowSize());\n    window.addEventListener(\"resize\", handleResize);\n\n    const bugGenerationInterval = setInterval(() => dispatch({ type: \"new\" }), 25000);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n      clearInterval(bugGenerationInterval);\n    };\n  }, []);\n\n  function renderBullets(numBullets) {\n    const bullets = [];\n\n    for (let i = 0; i < numBullets; i++) {\n      bullets.push(<div className=\"bullet\" key={i}></div>);\n    }\n\n    return bullets;\n  }\n\n  function handleKeyPress(event) {\n    if (event.key === \" \") {\n      dispatch({ type: \"reload\" });\n    }\n  }\n\n  return (\n    <div className=\"App\" onClick={() => dispatch({ type: \"fire\" })} onKeyUp={handleKeyPress} tabIndex={0} style={{\n      cursor: `url(${process.env.PUBLIC_URL}/scope.png) 62 67, auto`,\n      outline: \"none\",\n    }}>\n      <div className=\"scores\">\n        <div>CURRENT SCORE: {state.score}</div>\n        <div>HIGH SCORE: {state.highScore}</div>\n        <div>{renderBullets(state.shotsLeft)}</div>\n      </div>\n      <ReloadMessage display={state.showReloadMessage}/>\n      {[\n        ...state.inactiveBugs.map(bugKey => <Bug key={bugKey} id={bugKey} windowSize={windowSize} appDispatch={dispatch} />),\n        ...state.activeBugs.map(bugKey => <Bug key={bugKey} id={bugKey} windowSize={windowSize} appDispatch={dispatch} clickable={state.shotsLeft > 0}/>).reverse()\n      ]}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}